# 1-6 二分查找总结

## P2249	查找

输入 $n$ 个单调不减的非负整数然后进行 $m$ 次询问, 输出输出这个数字在序列中第一次出现的编号, 没有找到的话输出 $-1$.

### 思路

二分模板题, 注意超出右边界时需要判断.

```python
i = bisect_left(num, q)
if i == len(num) or num[i] != q:  # 注意判断超出右边界
    print("-1", end=" ")
else:
    print(i + 1, end=" ")
```

## P1102	A-B 数对

给出一串正整数数列以及一个正整数 $C$，要求计算出所有满足 $A - B = C$ 的数对的个数（不同位置的数字一样的数对算不同的数对）。

### 思路

先对数列排序, 然后二分查找 $A=B+C$, 用`bisect_right` 减去 `bisect_left` 即可得到一个数的答案.

## P1873	\[COCI 2011/2012 #5\] EKO / 砍树

有 $N$ 棵树, 要求求出锯片的最高高度 $H$, 使得能得到的木材**至少**为 $M$ 米.

### 思路

二分查找. 左端点为 $0$, 右端点为 $max(height)$. 注意返回的端点不一定满足条件.

```python
def bS(l, r):
    # 注意 res[:r] > M, res[r] <= M
    # 所以要判断返回值是否等于 M
    if l == r:
        if cal(l) >= M: return l
        else: return l - 1
    mid = (l + r) >> 1
    res = cal(mid)
    if res <= M: return bS(l, mid)  # 不够, 砍多点
    else: return bS(mid + 1, r)
```

## P1024	\[NOIP2001 提高组\] 一元三次方程求解

有一元三次方程 $a x^3 + b x^2 + c x + d = 0$ ，给出该方程中各项的系数，并约定该方程存在三个不同实根（根的范围在 $-100$ 至 $100$ 之间），且根与根之差的绝对值 $\ge 1$。要求由小到大依次在同一行输出这三个实根(根与根之间留有空格)，并精确到小数点后 $2$ 位。

提示：零点定理

### 思路

如果根非常接近 $0$ 则需要特判，否则会输出 $-0.00$ 。

```python
for x in range(-100, 100):
    if func(x) == 0:
        print("{:.2f}".format(x), end=" ")
    elif func(x) * func(x + 1) < 0:
        l, r = x, x + 1
        while r - l >= 0.0001:
            mid = (l + r) / 2
            if func(l) * func(mid) <= 0:
                r = mid
            else:
                l = mid
        if abs(l) < 0.01:
            l = 0
        print("{:.2f}".format(l), end=" ")
```

## P1678	烦恼的高考志愿

现有 $m$ 所学校，每所学校预计分数线是 $a_i$。有 $n$ 位学生，估分分别为 $b_i$。

根据 $n$ 位学生的估分情况，分别给每位学生推荐一所学校，要求学校的预计分数线和学生的估分相差最小（可高可低，毕竟是估分嘛），这个最小值为不满意度。求所有学生不满意度和的最小值。

### 思路

对学校分数和学生分数排序后，可以对每个学生二分，也可以维护两个指针分别指向学生和学校。

## P2440	木材加工

木材厂有 $n$ 根原木，现在想把这些木头切割成 $k$ 段长度**均**为 $l$ 的小段木头（木头有可能有剩余）。希望得到的小段木头越长越好，请求出 $l$ 的最大值。

### 思路

二分答案即可

## P2678	\[NOIP2015 提高组\] 跳石头

河道中分布着一些巨大岩石。组委会已经选择好了两块岩石作为比赛起点和终点。在起点和终点之间，有 $N$ 块岩石（不含起点和终点的岩石）。在比赛过程中，选手们将从起点出发，每一步跳向相邻的岩石，直至到达终点。

为了提高比赛难度，组委会计划移走一些岩石，使得选手们在比赛过程中的最短跳跃距离尽可能长。由于预算限制，组委会至多从起点和终点之间移走 $M$ 块岩石（不能移走起点和终点的岩石），求解**最短跳跃距离的最大值**。

### 思路

二分答案即可，维护两个指向当前石头的指针 $i$, $j$ 且 $i < j$ 。

 需要考虑一种特殊情况，即当 $j$ 指向最后一块石头时，如果距离不够并且还能删石头，就把 $i$ 指向的石头删掉，理由是 $i$ 之前的石头都满足条件。

## P3853	\[TJOI2007\] 路标设置

B 市和 T 市之间有一条长长的高速公路，这条公路的某些地方设有路标，把公路上相邻路标的最大距离定义为该公路的“空旷指数”。现在政府决定在公路上增设一些路标，使得公路的“空旷指数”最小。他们请求你设计一个程序计算能达到的最小值是多少。

### 思路

二分答案即可

## P1182	数列分段 Section II

对于给定的一个长度为N的正整数数列 $A_{1\sim N}$，现要将其分成 $M$（ $M\leq N$ ）段，并要求每段连续，且每段和的最大值最小。

### 思路

二分答案即可

## P1163	银行贷款

等额本息贷款计算。

给定贷款的原值 $w_0$ 、每月支付的分期付款固定金额 $w$ 和分期付款还清贷款所需的总月数 $m$ ，求每月利率 $k$。

### 思路

设 $a$ 是还没还的本金和利息，实际计算 $m$ 次 $a=a*(k+1)-w$，如果 $a=0$ 就还清了，此时的 $k$ 就是每月利率。

## P3743	kotori的设备

kotori 有 $n$ 个可同时使用的设备。第 $i$ 个设备每秒消耗 $a_i$ 个单位能量。对于任意实数，在 $k$ 秒内消耗的能量均为 $k\times a_i$ 单位。在开始的时候第 $i$ 个设备里存储着 $b_i$ 个单位能量。

同时 kotori 又有一个可以给任意一个设备充电的充电宝，每秒可以给接通的设备充能 $p$ 个单位，可以在任意时间给任意一个设备充能，切换设备的时间忽略不计。

kotori 想把这些设备一起使用，直到其中有设备能量降为 $0$。所以 kotori 想知道，在充电器的作用下，她最多能将这些设备一起使用多久。

### 思路

二分答案